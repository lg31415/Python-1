## 二维码扫描

[TOC]
### 安装

#### 安装依赖项

> yum install ImageMagick ImageMagick-devel

#### 安装zbar
>方法1：编译安装
>
>
> > wget http://ncu.dl.sourceforge.net/project/zbar/zbar/0.10/zbar-0.10.tar.bz2
> >
> > tar -jxvf  zbar-0.10.tar.bz2
> >
> > ./configure --without-gtk --without-qt --disable-video --prefix=/usr/local
> >
> > ```
> > 注意关闭：video支持，否则报警：
> > configure: error: test for video support failed!
> > rebuild your kernel to include video4linux support or
> > configure --disable-video to skip building video support.
> > ```
> >
>
>方法2：直接yum安装
>
>> yum install zbar zbar-devel
>
#### 安装python的zbar包
>
> > wget https://pypi.python.org/packages/c8/ee/9a2dee14943c56520faf059914b815729ac6a732c8e608b24c0cad197238/zbar-0.10.zip
> >
> > python setup.py install

### 测试

> ```python
> #!/usr/bin/env python
> # -*- coding:utf-8 -*-
> import zbar
> from PIL import Image
> # 创建图片扫描对象
> scanner = zbar.ImageScanner()
> # 设置对象属性 
> scanner.parse_config('enable')
> # 打开含有二维码的图片(注意是bmp格式的，其它格式的需要安装对应的包支持)
> img = Image.open('qr.bmp').convert('L')
> #获取图片的尺寸
> width, height = img.size
> raw = img.tostring() 
> #建立zbar图片对象并扫描转换为字节信息
> qrCode = zbar.Image(width, height, 'Y800', raw)
> scanner.scan(qrCode)
> data = '' 
> for s in qrCode: data += s.data
> # 删除图片对象
> del img
> # 输出解码结果
> print data
> ```

### 参考

[python解析二维码](http://www.toutiao.com/a6355324610682978561/)

 [python 使用zbar解码二维码](http://blog.csdn.net/kkxgx/article/details/7749319)
